# aws
- 아마존에서 여분의 서버를 대여해주는 클라우드 서비스

### 학습 목표
- 클라우드 서비스를 활용하기 위해 기본지식을 학습 - axw, linux, network
- 내 프로젝트를 단순 배포하기 위해 환경을 구축 - ec2 (iaas: 인프라 - 물리적 컴퓨터)
- 배포를 간편하게 - shell script
- 환경 구축 없이 내 프로젝트를 배포 - 엘라스틱 빈 스톡 (paas: 플랫폼 - 물리적 컴퓨터(플랫폼))
- 배포 자동화를 구축 - github action
- 무중단 배포 - 로드 밸런서, 롤링 배포
- 정적 ip 할당 - network road balancer

### 전체 구성
- 프로젝트 -> github -> github action (테스트, 빌드(jar), 배포) -> aws (로드밸런서, ec2 서버)

### 배경 지식
- 전산실 구축시 유의점 : 토지, 건물, 하드웨어 장비(서버(중지 x), 침입 방지 or 차단 시스템(ips, ids, 방화벽), 로드 밸런서(L4 장비), 각종 네트워크 장비),
에어컨(반도체 온도 조절), 전기,복잡한 케이블 정리, 소방 시설, 전산실 보안
---
- 서킷 스위칭 : 목적지와 다이렉트로 선을 연결하여 통신하는 방법, 하지만 거리에 따른 선의 길이 증가로 인한 비용 증가라는 단점
- 패킷 스위칭 : 중간 지점에 라우터라는 집결지를 만들어 일정 구간에 있는 사용자의 전송 패킷을 모아 보내주는 방식, 목적지 또한 이와 같은 환경이 구성되어 라우터를 거침
- 패킷은 데이터를 보낼때 일정량을 기준으로 잘라진 것
---
- 라우터에서 받은 수많은 정보는 도착 순서를 보장하지 않으므로 각 패킷은 헤더 정보를 이용해 목적지에서 재조립
- 헤더 정보 안을 보면 각 컴퓨터에 ip라는 고유번호가 있고 이를 주소로 이용해 서로 통신
- 또 헤더에는 포트 정보라는게 있어 이 패킷이 어떤 기능을 사용하기 위해 보낸것인지 정수값으로 표기
---
- aws 사이트에 접속 후 우분투 운영체제로 컴퓨터를 임대 (접속은 mobaxterm이라는 프로그램 이용, 컴퓨터를 ec2 서버라 함)
- 이때 aws에서 임대해준 컴퓨터는 방화벽이 작동하여 모든 포트를 차단한 후 인바운드 (외부 -> 내부) 규칙을 설정하여 일정 조건에서만 입장 허용
- 22번 포트로 보통 접속하는데 ssh라는 secure shell을 이용한다는 것 (CLI: command line interface)
- 이때 비밀번호와 같은 개인정보도 오가므로 보안적인 부분도 필요하므로 그냥 shell이 아닌 secure shell
---
- 스프링 부트 프로젝트 배포 : 로컬 컴퓨터에서 만든 프로젝트를 운영 컴퓨터에 올리는 작업 + 진행 중 문제점 파악 및 해결 + github 업로드 + 환경 세팅(jdk) 및 실행
- ec2 서버 - t2.micro 서버 - 프리티어 사용자들(가입한지 1년이 안된) 한에서 750시간 무료(한달), 서버 2개 가동시 추가 비용 발생
- 고정 ip(엘라스틱 ip) : isp에선 한정된 ip를 더 많은 사용자에게 제공하여 ip를 공유하게끔 하는데(유동 ip) 서버를 돌리면 계속 ip를 사용해야 함으로 ip를 할당받음
- 탄력적 ip 생성후 ec2 서버와 연결하여야 무료, 연결하지 않거나 2개를 만들면 비용 부과
